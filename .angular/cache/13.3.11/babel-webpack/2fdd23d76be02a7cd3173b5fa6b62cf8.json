{"ast":null,"code":"import { Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/bibliotech.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"ngx-cookie-service\";\nimport * as i4 from \"@angular/router\";\n\nconst _c0 = function () {\n  return [\"/register\", \"new\"];\n};\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(service, fb, cookieService, router) {\n      this.service = service;\n      this.fb = fb;\n      this.cookieService = cookieService;\n      this.router = router;\n    }\n\n    ngOnInit() {\n      this.initializeForm();\n    }\n\n    initializeForm() {\n      this.loginForm = this.fb.group({\n        email: [\"\", [Validators.required]],\n        password: [\"\", [Validators.required, Validators.minLength(6)]]\n      });\n    }\n\n    login() {\n      this.service.login(this.loginForm.value).subscribe(login => {\n        const jwt = login.cookie.value;\n\n        if (!!jwt) {\n          this.service.jwtToken = jwt;\n          this.service.user = {\n            id: login.data.id,\n            email: login.data.email,\n            password: \"\",\n            firstName: login.data.firstName,\n            lastName: login.data.lastName\n          };\n          this.service.userId = login.data.id;\n          this.cookieService.set(\"user\", jwt);\n          this.cookieService.set(\"userObject\", JSON.stringify(this.service.user));\n          this.getInfos();\n          this.router.navigate([\"collection\"]);\n        }\n      });\n    }\n\n    getInfos() {\n      this.service.getBooks().subscribe(books => this.service.bookList = books);\n      this.service.getCollections().subscribe(collections => this.service.collectionList = collections);\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.BibliotechService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.CookieService), i0.ɵɵdirectiveInject(i4.Router));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 25,\n    vars: 3,\n    consts: [[1, \"bg-primary-200\", \"dark:bg-gray-900\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"px-6\", \"py-8\", \"mx-auto\", \"md:h-screen\", \"lg:py-0\"], [\"href\", \"#\", 1, \"flex\", \"items-center\", \"mb-6\", \"text-4xl\", \"font-bold\", \"text-gray-900\", \"dark:text-white\"], [\"src\", \"../../../../assets/icons/bibliotech.png\", \"alt\", \"logo\", 1, \"w-14\", \"h-14\", \"mr-2\"], [1, \"w-full\", \"bg-white\", \"rounded-lg\", \"shadow\", \"dark:border\", \"md:mt-0\", \"sm:max-w-md\", \"xl:p-0\", \"dark:bg-gray-800\", \"dark:border-gray-700\"], [1, \"p-6\", \"space-y-4\", \"md:space-y-6\", \"sm:p-8\"], [1, \"text-xl\", \"font-bold\", \"leading-tight\", \"tracking-tight\", \"text-gray-900\", \"md:text-2xl\", \"dark:text-white\"], [1, \"space-y-4\", \"md:space-y-6\", 3, \"formGroup\"], [\"for\", \"email\", 1, \"block\", \"mb-2\", \"text-sm\", \"font-medium\", \"text-gray-900\", \"dark:text-white\"], [\"type\", \"email\", \"name\", \"email\", \"formControlName\", \"email\", \"id\", \"email\", \"placeholder\", \"name@company.com\", \"required\", \"\", 1, \"bg-gray-50\", \"border\", \"border-gray-300\", \"text-gray-900\", \"sm:text-sm\", \"rounded-lg\", \"focus:ring-primary-600\", \"focus:border-primary-600\", \"block\", \"w-full\", \"p-2.5\", \"dark:bg-gray-700\", \"dark:border-gray-600\", \"dark:placeholder-gray-400\", \"dark:text-white\", \"dark:focus:ring-blue-500\", \"dark:focus:border-blue-500\"], [\"for\", \"password\", 1, \"block\", \"mb-2\", \"text-sm\", \"font-medium\", \"text-gray-900\", \"dark:text-white\"], [\"type\", \"password\", \"name\", \"password\", \"formControlName\", \"password\", \"id\", \"password\", \"placeholder\", \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\", \"required\", \"\", 1, \"bg-gray-50\", \"border\", \"border-gray-300\", \"text-gray-900\", \"sm:text-sm\", \"rounded-lg\", \"focus:ring-primary-600\", \"focus:border-primary-600\", \"block\", \"w-full\", \"p-2.5\", \"dark:bg-gray-700\", \"dark:border-gray-600\", \"dark:placeholder-gray-400\", \"dark:text-white\", \"dark:focus:ring-blue-500\", \"dark:focus:border-blue-500\"], [\"type\", \"button\", 1, \"w-full\", \"text-white\", \"bg-primary-600\", \"hover:bg-primary-700\", \"focus:ring-4\", \"focus:outline-none\", \"focus:ring-primary-300\", \"font-medium\", \"rounded-lg\", \"text-sm\", \"px-5\", \"py-2.5\", \"text-center\", \"dark:bg-primary-600\", \"dark:hover:bg-primary-700\", \"dark:focus:ring-primary-800\", 3, \"click\"], [1, \"flex\", \"justify-center\"], [1, \"text-sm\", \"font-light\", \"text-gray-500\", \"dark:text-gray-400\"], [1, \"font-medium\", \"text-primary-600\", \"hover:underline\", \"dark:text-primary-500\", 3, \"routerLink\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"a\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵtext(4, \" Bibliotech \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"h1\", 6);\n        i0.ɵɵtext(8, \" Fa\\u00E7a login na sua conta \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"form\", 7)(10, \"div\")(11, \"label\", 8);\n        i0.ɵɵtext(12, \"Seu email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"input\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\")(15, \"label\", 10);\n        i0.ɵɵtext(16, \"Senha\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"input\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_18_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵtext(19, \" Entrar \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 13)(21, \"p\", 14);\n        i0.ɵɵtext(22, \" N\\u00E3o tem uma conta ainda? \");\n        i0.ɵɵelementStart(23, \"a\", 15);\n        i0.ɵɵtext(24, \"Criar conta\");\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c0));\n      }\n    },\n    directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i2.RequiredValidator, i4.RouterLinkWithHref],\n    styles: [\"\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}