{"ast":null,"code":"import { Validators } from \"@angular/forms\";\nimport { initFlowbite } from \"flowbite\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/bibliotech.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"../navbar/navbar.component\";\nimport * as i6 from \"@angular/common\";\n\nfunction NewCollectionComponent_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function NewCollectionComponent_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.onRemove();\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 12);\n    i0.ɵɵelement(2, \"path\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.optParam === \"new\" ? \"Descartar cole\\u00E7\\u00E3o\" : \"Excluir cole\\u00E7\\u00E3o\", \" \");\n  }\n}\n\nexport let NewCollectionComponent = /*#__PURE__*/(() => {\n  class NewCollectionComponent {\n    constructor(service, fb, route, router, toastService) {\n      this.service = service;\n      this.fb = fb;\n      this.route = route;\n      this.router = router;\n      this.toastService = toastService;\n      this.isEdit = false;\n    }\n\n    ngOnInit() {\n      this.service.getUser();\n      initFlowbite();\n      this.initializeForm();\n      this.route.params.subscribe(params => {\n        this.optParam = params[\"opt\"];\n      });\n      this.collectionItem = this.service.collectionItem;\n      this.isEdit = this.optParam === \"edit\";\n      this.isEdit ? this.setForm() : null;\n    }\n\n    onSave() {\n      var _a, _b;\n\n      this.collectionItem = Object.assign(Object.assign({}, this.collectionItem), {\n        title: (_a = this.collectionForm.get(\"title\")) === null || _a === void 0 ? void 0 : _a.value,\n        description: (_b = this.collectionForm.get(\"description\")) === null || _b === void 0 ? void 0 : _b.value,\n        userId: +this.service.userId\n      });\n\n      if (this.isEdit) {\n        this.service.updateCollection(this.collectionItem).subscribe(() => this.toastService.success(\"Coleção editada com sucesso!\"));\n      } else {\n        this.service.saveCollection(this.collectionItem).subscribe(() => this.toastService.success(\"Coleção salva com sucesso!\"));\n      }\n\n      this.router.navigate([\"collection\"]);\n    }\n\n    onRemove() {\n      this.service.removeCollection(this.collectionItem.id).subscribe(() => this.toastService.success(\"Coleção removida com sucesso!\"));\n      this.router.navigate([\"collection\"]);\n    }\n\n    initializeForm() {\n      this.collectionForm = this.fb.group({\n        title: [\"\", [Validators.required]],\n        description: [\"\", [Validators.required]]\n      });\n    }\n\n    setForm() {\n      this.collectionForm = this.fb.group({\n        title: [this.collectionItem.title, [Validators.required]],\n        description: [this.collectionItem.description, [Validators.required]]\n      });\n    }\n\n  }\n\n  NewCollectionComponent.ɵfac = function NewCollectionComponent_Factory(t) {\n    return new (t || NewCollectionComponent)(i0.ɵɵdirectiveInject(i1.BibliotechService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ToastrService));\n  };\n\n  NewCollectionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NewCollectionComponent,\n    selectors: [[\"app-new-collection\"]],\n    decls: 18,\n    vars: 5,\n    consts: [[1, \"bg-primary-200\", \"h-full\", \"dark:bg-gray-900\"], [1, \"flex\", \"flex-col\", \"items-center\", \"px-6\", \"py-8\", \"mx-auto\", \"md:h-screen\", \"lg:py-0\"], [1, \"w-full\", \"md:mt-0\", \"sm:max-w-md\", \"xl:p-0\"], [1, \"space-y-4\", \"md:space-y-6\", \"sm:p-8\"], [1, \"space-y-4\", \"md:space-y-6\", 3, \"formGroup\"], [\"for\", \"collection\", 1, \"block\", \"mb-2\", \"font-bold\", \"text-gray-900\", \"dark:text-white\"], [\"type\", \"string\", \"name\", \"collection\", \"id\", \"collection\", \"formControlName\", \"title\", \"required\", \"\", 1, \"bg-gray-50\", \"border\", \"border-gray-300\", \"text-gray-900\", \"sm:text-sm\", \"rounded-lg\", \"focus:ring-primary-600\", \"focus:border-primary-600\", \"block\", \"w-full\", \"p-2.5\", \"dark:bg-gray-700\", \"dark:border-gray-600\", \"dark:placeholder-gray-400\", \"dark:text-white\", \"dark:focus:ring-primary-500\", \"dark:focus:border-primary-500\", 3, \"value\"], [\"for\", \"description\", 1, \"block\", \"mb-2\", \"font-bold\", \"text-gray-900\", \"dark:text-white\"], [\"id\", \"description\", \"rows\", \"3\", \"formControlName\", \"description\", 1, \"block\", \"p-2.5\", \"w-full\", \"text-sm\", \"text-gray-900\", \"bg-gray-50\", \"rounded-lg\", \"border\", \"border-gray-300\", \"focus:ring-primary-500\", \"focus:border-primary-500\", \"dark:bg-gray-700\", \"dark:border-gray-600\", \"dark:placeholder-gray-400\", \"dark:text-white\", \"dark:focus:ring-primary-500\", \"dark:focus:border-primary-500\", 3, \"value\"], [1, \"w-full\", \"text-white\", \"bg-primary-600\", \"hover:bg-primary-700\", \"focus:ring-4\", \"focus:outline-none\", \"focus:ring-primary-300\", \"font-medium\", \"rounded-lg\", \"text-sm\", \"px-5\", \"py-2.5\", \"text-center\", \"dark:bg-primary-600\", \"dark:hover:bg-primary-700\", \"dark:focus:ring-primary-800\", 3, \"click\"], [\"type\", \"button\", \"class\", \"text-red-600 w-full flex justify-center items-center hover:text-white border border-red-600 hover:bg-red-600 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"text-red-600\", \"w-full\", \"flex\", \"justify-center\", \"items-center\", \"hover:text-white\", \"border\", \"border-red-600\", \"hover:bg-red-600\", \"focus:ring-4\", \"focus:outline-none\", \"focus:ring-red-300\", \"font-medium\", \"rounded-lg\", \"text-sm\", \"px-5\", \"py-2.5\", \"text-center\", \"dark:border-red-500\", \"dark:text-red-500\", \"dark:hover:text-white\", \"dark:hover:bg-red-600\", \"dark:focus:ring-red-900\", 3, \"click\"], [\"fill\", \"currentColor\", \"viewBox\", \"0 0 20 20\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"w-5\", \"h-5\", \"mr-1\", \"-ml-1\"], [\"fill-rule\", \"evenodd\", \"d\", \"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\", \"clip-rule\", \"evenodd\"]],\n    template: function NewCollectionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navbar\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"section\")(3, \"div\", 1)(4, \"div\", 2)(5, \"div\", 3)(6, \"form\", 4)(7, \"div\")(8, \"label\", 5);\n        i0.ɵɵtext(9, \"Nome da cole\\u00E7\\u00E3o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\")(12, \"label\", 7);\n        i0.ɵɵtext(13, \"Descri\\u00E7\\u00E3o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"textarea\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function NewCollectionComponent_Template_button_click_15_listener() {\n          return ctx.onSave();\n        });\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, NewCollectionComponent_button_17_Template, 4, 1, \"button\", 10);\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.collectionForm);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.collectionItem == null ? null : ctx.collectionItem.title);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.collectionItem == null ? null : ctx.collectionItem.description);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.optParam === \"new\" ? \"Criar cole\\u00E7\\u00E3o\" : \"Atualizar cole\\u00E7\\u00E3o\", \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isEdit);\n      }\n    },\n    directives: [i5.NavbarComponent, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i2.RequiredValidator, i6.NgIf],\n    styles: [\"\"]\n  });\n  return NewCollectionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}